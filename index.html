<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Safari Sips - Salafi YouTube Channel</title>
<style>
  body {
    margin: 0;
    font-family: 'Cinzel', serif;
    background: #f5f5f5;
    color: #222;
    display: flex;
    min-height: 100vh;
  }
  #sidebar {
    width: 220px;
    background: #000;
    color: #eee;
    display: flex;
    flex-direction: column;
    padding: 20px;
  }
  #sidebar img {
    width: 60px;
    height: auto;
    margin-bottom: 20px;
    cursor: pointer;
  }
  #sidebar h2 {
    margin: 10px 0 20px 0;
    font-weight: bold;
  }
  #sidebar a {
    color: #eee;
    text-decoration: none;
    padding: 10px 0;
    font-weight: 600;
    border-bottom: 1px solid #444;
  }
  #sidebar a:hover {
    background: #222;
  }
  #main {
    flex-grow: 1;
    padding: 30px;
    background: #fff;
    overflow-y: auto;
  }
  #video-player {
    width: 100%;
    height: 400px;
    margin-bottom: 30px;
  }
  #video-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 15px;
  }
  .video-item {
    cursor: pointer;
  }
  .video-item img {
    width: 100%;
    border-radius: 4px;
  }
  .video-title {
    margin-top: 8px;
    font-size: 0.95rem;
    color: #333;
  }
</style>
</head>
<body>

<div id="sidebar">
  <img src="logo.png" alt="Safari Sips Logo" id="logo" />
  <h2>Safari Sips</h2>
  <a href="#" id="about-link">About This Page</a>
  <a href="#" id="all-videos-link">All Videos</a>
  <a href="#" id="latest-video-link">Latest Video</a>
</div>

<div id="main">
  <div id="video-player-container">
    <iframe id="video-player" src="" frameborder="0" allowfullscreen></iframe>
  </div>
  <div id="video-list"></div>
</div>

<script>
  const API_KEY = 'AIzaSyBxjceYQcKUaSwU12QLeu6meNmuIBunMng';  // Your actual API key
  const CHANNEL_ID = 'UCXZpmb3LM-OvdqLCyZWc7FA';  // Your YouTube Channel ID

  const videoPlayer = document.getElementById('video-player');
  const videoList = document.getElementById('video-list');
  const aboutLink = document.getElementById('about-link');
  const allVideosLink = document.getElementById('all-videos-link');
  const latestVideoLink = document.getElementById('latest-video-link');

  // Load videos from channel via YouTube Data API
  async function fetchVideos(pageToken = '') {
    const url = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet,id&order=date&maxResults=12&pageToken=${pageToken}`;
    try {
      const response = await fetch(url);
      const data = await response.json();
      return data;
    } catch (e) {
      console.error('Error fetching videos', e);
      return null;
    }
  }

  // Display video list
  function displayVideos(videos) {
    videoList.innerHTML = '';
    videos.forEach(video => {
      if (video.id.kind === 'youtube#video') {
        const videoId = video.id.videoId;
        const title = video.snippet.title;
        const thumbnail = video.snippet.thumbnails.medium.url;

        const videoDiv = document.createElement('div');
        videoDiv.classList.add('video-item');
        videoDiv.innerHTML = `
          <img src="${thumbnail}" alt="${title}" />
          <div class="video-title">${title}</div>
        `;
        videoDiv.addEventListener('click', () => {
          playVideo(videoId);
        });
        videoList.appendChild(videoDiv);
      }
    });
  }

  // Play video by videoId
  function playVideo(videoId) {
    videoPlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
  }

  // Show about info
  function showAbout() {
    videoPlayer.src = '';
    videoList.innerHTML = `
      <h2>About This Page</h2>
      <p>This is the official Safari Sips Salafi YouTube Channel website, displaying all videos and latest uploads. Stay connected and updated.</p>
    `;
  }

  // Show all videos
  async function showAllVideos() {
    const data = await fetchVideos();
    if (data && data.items) {
      displayVideos(data.items);
      // Play first video by default
      const firstVideo = data.items.find(item => item.id.kind === 'youtube#video');
      if (firstVideo) playVideo(firstVideo.id.videoId);
    }
  }

  // Show latest video uploaded this week
  async function showLatestVideo() {
    const data = await fetchVideos();
    if (!data || !data.items) {
      videoList.innerHTML = '<p>No videos found.</p>';
      return;
    }
    // Filter videos uploaded within last 7 days
    const oneWeekAgo = new Date();
    oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);

    const recentVideos = data.items.filter(item => {
      if (item.id.kind !== 'youtube#video') return false;
      const publishedDate = new Date(item.snippet.publishedAt);
      return publishedDate >= oneWeekAgo;
    });

    if (recentVideos.length === 0) {
      videoList.innerHTML = '<p>No videos uploaded this week.</p>';
      videoPlayer.src = '';
      return;
    }

    displayVideos(recentVideos);
    playVideo(recentVideos[0].id.videoId);
  }

  aboutLink.addEventListener('click', e => {
    e.preventDefault();
    showAbout();
  });

  allVideosLink.addEventListener('click', e => {
    e.preventDefault();
    showAllVideos();
  });

  latestVideoLink.addEventListener('click', e => {
    e.preventDefault();
    showLatestVideo();
  });

  // Initial load - show all videos
  showAllVideos();
</script>

</body>
</html>
